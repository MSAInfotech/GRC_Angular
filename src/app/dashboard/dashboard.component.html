<section>
  <div class="dashboard-container">
    <div class="dropdown-box mb-1 w-100 custom-date-picker">
      <span class="w-100 text-center">Today</span>
      <input type="date">
      <i class="fas fa-calendar-alt border-1"></i> <!-- Font Awesome calendar icon -->
    </div>

    <!-- Filters -->
    <div class="row ms-0 mb-3 align-items-center justify-content-between col-lg-12 col-md-12 col-sm-12">
      <!-- Left Content -->
      <div class="text-start col-lg-6 col-md-6 col-sm-12 p-0">
        <h6 class="font-bold">Current Overview: All Projects</h6>
      </div>

      <!-- Right Content -->
      <div id="di" class="d-flex justify-content-end align-items-center gap-2 col-lg-6 col-md-6 col-sm-12 p-0">
        <div>
          <select class="form-select" style="border-radius: 0%; font-size: 14px; cursor: pointer;">
            <option selected>All departments are selected</option>
          </select>
        </div>
        <div>
          <select class="form-select" style="border-radius: 0%; font-size: 14px; cursor: pointer;">
            <option selected>All projects are selected</option>
          </select>
        </div>
        <div>
          <button class="btn btn-success"
            style="height: 34px; font-size: 14px; padding: 0 10px; white-space: nowrap; border-radius: 0;">
            Export to PDF
          </button>

        </div>
      </div>
    </div>

    <!-- Dashboard Cards -->
    <div class="row g-3">
      <!-- Card 1 -->
      <div class="col-lg-2 col-md-4 col-sm-6 col-12">
        <div class="card border-1 rounded-1 p-3 h-100">
          <div class="d-flex align-items-start justify-content-start">
            <div class="fs-5 text-secondary col-3"><i class="fas fa-cube"></i></div>
            <div class="fs-4 text-secondary col-9 text-start">
              <h1 class="fs-5 fw-bold text-dark mb-1">3153</h1>
              <p class="fs-8 text-muted mb-0">All Controls</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Card 2 -->
      <div class="col-lg-2 col-md-4 col-sm-6 col-12">
        <div class="card border-1 rounded-1 p-3 h-100">
          <div class="d-flex align-items-start justify-content-start">
            <div class="fs-5 text-secondary col-3"><i class="fas fa-times"></i></div>
            <div class="fs-4 text-secondary col-9 text-start">
              <h1 class="fs-5 fw-bold text-dark mb-1">0</h1>
              <p class="fs-8 text-muted mb-0">Not Applicable</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Card 3 -->
      <div class="col-lg-2 col-md-4 col-sm-6 col-12">
        <div class="card border-1 rounded-1 p-3 h-100">
          <div class="d-flex align-items-start justify-content-start">
            <div class="fs-5 text-secondary col-3"><i class="fas fa-flag"></i></div>
            <div class="fs-4 text-secondary col-9 text-start">
              <h1 class="fs-5 fw-bold text-dark mb-1">955</h1>
              <p class="fs-8 text-muted mb-0">Implemented Controls</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Card 4 -->
      <div class="col-lg-2 col-md-4 col-sm-6 col-12">
        <div class="card border-1 rounded-1 p-3 h-100">
          <div class="d-flex align-items-start justify-content-start">
            <div class="fs-5 text-secondary col-3"><i class="fas fa-star"></i></div>
            <div class="fs-4 text-secondary col-9 text-start">
              <h1 class="fs-5 fw-bold text-dark mb-1">0</h1>
              <p class="fs-8 text-muted mb-0">Partially Implemented</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Card 5 -->
      <div class="col-lg-2 col-md-4 col-sm-6 col-12">
        <div class="card border-1 rounded-1 p-3 h-100">
          <div class="d-flex align-items-start justify-content-start">
            <div class="fs-5 text-secondary col-3"><i class="fas fa-window-close"></i></div>
            <div class="fs-4 text-secondary col-9 text-start">
              <h1 class="fs-5 fw-bold text-dark mb-1">2198</h1>
              <p class="fs-8 text-muted mb-0">Not Implemented</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Card 6 -->
      <div class="col-lg-2 col-md-4 col-sm-6 col-12">
        <div class="card border-1 rounded-1 p-3 h-100">
          <div class="d-flex align-items-start justify-content-start">
            <div class="fs-5 text-secondary col-3"><i class="fas fa-window-close"></i></div>
            <div class="fs-4 text-secondary col-9 text-start">
              <h1 class="fs-5 fw-bold text-dark mb-1">256</h1>
              <p class="fs-8 text-muted mb-0">Inactive Controls</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Task Monitor -->
  <div class="row dashboard-container w-100 justify-content-between">
    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 p-0 mb-0">
      <div class="card justify-content-between">
        <div class="card-title font-bold">Task Monitor</div>
        <div class="row w-100">
          <div class="col-lg-8 col-md-6 col-sm-12 col-xs-12">
            <div class="chart-container">
              <div class="chart-circle"></div>
              <div class="chart-progress"></div>
              <div class="chart-percentage">30%</div>
            </div>
            <p class="pt-2">Task Completion Percentage</p>
          </div>
          <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12">
            <!-- Task Monitor -->
            <div class="">
              <ul class="task-list">
                <li>
                  <span><i class="fas fa-tasks"></i> 117 All Upcoming</span>
                  <button class="go-btn">Go</button>
                </li>
                <li>
                  <span><i class="fas fa-calendar-alt"></i> 1 Due Today</span>
                  <button class="go-btn">Go</button>
                </li>
                <li>
                  <span><i class="fas fa-exclamation-circle"></i> 1995 Past Due</span>
                  <button class="go-btn">Go</button>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="box2" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 pe-0">
      <div class="card" style="height: 100%;">
        <h5 class="card-title font-bold">Implementation Progress</h5>
        <p-chart type="doughnut" [data]="data" [options]="optionset"></p-chart>
      </div>
    </div>
    <!-- <div class="card w-25">
            <div class="card-title">Implementation Progress</div>
            <div class="chart-container">
                <div class="chart-circle"></div>
                <div class="chart-progress" style="clip-path: polygon(0 0, 100% 0, 100% 50%, 50% 100%, 0 100%);"></div>
                <div class="chart-percentage">3153</div>
            </div>
            <ul class="list-group">
                <li class="list-group-item">
                    <span>Implemented</span>
                    <span>3153</span>
                </li>
                <li class="list-group-item">
                    <span>Partially Implemented</span>
                    <span>0</span>
                </li>
                <li class="list-group-item">
                    <span>Not Implemented</span>
                    <span>2198</span>
                </li>
            </ul>
        </div> -->
  </div>

  <div class="dashboard-container g-3 mt-4">
    <div class="col-12">
      <div class="card p-3">
        <div class="d-flex align-items-center justify-content-between flex-wrap">
          <h6 class="d-flex align-items-center font-bold mb-0">
            <i class="fa fa-calendar-alt me-2"></i> Task Calendar - <span class="ms-2">{{ currentYear }}</span>
          </h6>
          <div class="d-flex align-items-center flex-wrap mt-2 mt-md-0">
            <div class="d-flex align-items-center me-3">
              <span class="status-square black"></span>
              <span class="ms-2" style="font-size: 95%;">Upcoming</span>
            </div>
            <div class="d-flex align-items-center me-3">
              <span class="status-square sky-blue"></span>
              <span class="ms-2" style="font-size: 95%;">Partially Implemented</span>
            </div>
            <div class="d-flex align-items-center me-3">
              <span class="status-square red"></span>
              <span class="ms-2" style="font-size: 95%;">Late</span>
            </div>
            <div class="d-flex align-items-center me-3">
              <span class="status-square green"></span>
              <span class="ms-2" style="font-size: 95%;">Implemented</span>
            </div>
          </div>

        </div>




        <hr>
        <!-- <div class="d-flex justify-content-between align-items-center">
                  <button class="btn btn-outline-secondary" style="margin-left: 10px;">Today</button>
                  <div class="btn-group">
                    <button class="btn btn-outline-primary">Month</button>
                    <button class="btn btn-outline-primary">Week</button>
                  </div>
                </div> -->

        <div class="calendar-container">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <button class="btn btn-outline-secondary" (click)="goToPreviousMonth()">
              <i class="bi bi-chevron-left"></i> Previous
            </button>

            <div>
              <select class="form-select d-inline-block w-auto me-2" [(ngModel)]="currentMonthIndex"
                (change)="selectMonthAndYear(currentMonthIndex)">
                <option *ngFor="let month of months; index as i" [value]="i">{{ month }}</option>
              </select>

              <select class="form-select d-inline-block w-auto" [(ngModel)]="currentYear"
                (change)="renderCalendar(currentYear, currentMonthIndex)">
                <option *ngFor="let year of yearRange" [value]="year">{{ year }}</option>
              </select>
            </div>

            <button class="btn btn-outline-secondary" (click)="goToNextMonth()">
              Next <i class="bi bi-chevron-right"></i>
            </button>
          </div>

          <table class="table table-bordered calendar-table text-center">
            <thead>
              <tr>
                <th *ngFor="let day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']">{{ day }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let week of calendarDays">
                <td *ngFor="let day of week" [ngClass]="{ 'festival-day': day.festival, 'current-day': day.isToday }"
                  (click)="openEventModal(day)">
                  <div *ngIf="day.date">
                    <span class="date">{{ day.date }}</span>
                    <div class="festival" *ngIf="day.festival">{{ day.festival }}</div>
                    <ul class="event-list">
                      <li *ngFor="let event of day.events">{{ event }}</li>
                    </ul>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>

          <!-- Modal for adding events -->
          <div class="modal" [ngClass]="{ 'show': isModalOpen }" [style.display]="isModalOpen ? 'block' : 'none'">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Add Event</h5>
                  <button type="button" class="btn-close" (click)="closeModal()"></button>
                </div>
                <div class="modal-body">
                  <p>Selected Date: {{ selectedDate | date: 'fullDate' }}</p>
                  <input type="text" class="form-control" placeholder="Enter event description" [(ngModel)]="newEvent">
                </div>
                <div class="modal-footer">
                  <button class="btn btn-secondary" (click)="closeModal()">Cancel</button>
                  <button class="btn btn-primary" (click)="addEvent()">Add Event</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>